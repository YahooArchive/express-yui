<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>middleware - express-yui API documentation</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="express-yui API documentation"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.2.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/client.html">client</a></li>
            
                <li><a href="../classes/ExpressYUI.html">ExpressYUI</a></li>
            
                <li><a href="../classes/loader-patch.html">loader-patch</a></li>
            
                <li><a href="../classes/middleware.html">middleware</a></li>
            
                <li><a href="../classes/origin.html">origin</a></li>
            
                <li><a href="../classes/seed.html">seed</a></li>
            
                <li><a href="../classes/server.html">server</a></li>
            
                <li><a href="../classes/utils.html">utils</a></li>
            
                <li><a href="../classes/yui.html">yui</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/express-yui.html">express-yui</a></li>
            
                <li><a href="../modules/express-yui_lib_client.html">express-yui/lib/client</a></li>
            
                <li><a href="../modules/express-yui_lib_loader-patches.html">express-yui/lib/loader-patches</a></li>
            
                <li><a href="../modules/express-yui_lib_middleware.html">express-yui/lib/middleware</a></li>
            
                <li><a href="../modules/express-yui_lib_origin.html">express-yui/lib/origin</a></li>
            
                <li><a href="../modules/express-yui_lib_patches_lang-bundles-requires.html">express-yui/lib/patches/lang-bundles-requires</a></li>
            
                <li><a href="../modules/express-yui_lib_patches_optional-requires.html">express-yui/lib/patches/optional-requires</a></li>
            
                <li><a href="../modules/express-yui_lib_patches_server-intl-get.html">express-yui/lib/patches/server-intl-get</a></li>
            
                <li><a href="../modules/express-yui_lib_patches_templates-requires.html">express-yui/lib/patches/templates-requires</a></li>
            
                <li><a href="../modules/express-yui_lib_seed.html">express-yui/lib/seed</a></li>
            
                <li><a href="../modules/express-yui_lib_server.html">express-yui/lib/server</a></li>
            
                <li><a href="../modules/express-yui_lib_utils.html">express-yui/lib/utils</a></li>
            
                <li><a href="../modules/express-yui_lib_yui.html">express-yui/lib/yui</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1>middleware Class</h1>
<div class="box meta">
    
        <div class="uses">
            Uses
            <ul class="inline commas">
                
                    <li><a href="client.html">client</a></li>
                
                    <li><a href="utils.html">utils</a></li>
                
                    <li><a href="*debug.html">*debug</a></li>
                
                    <li><a href="*express.html">*express</a></li>
                
                    <li><a href="*yui.html">*yui</a></li>
                
            </ul>
        </div>
    

    

    
        <div class="foundat">
            Defined in: <a href="../files/lib_middleware.js.html#l22"><code>lib&#x2F;middleware.js:22</code></a>
        </div>
    

    
        
            Module: <a href="../modules/express-yui_lib_middleware.html">express-yui/lib/middleware</a>
        
    

    
</div>



<div class="box intro">
    <p>Exports few middleware.</p>

</div>



<div id="classdocs" class="tabview">
    <ul class="api-class-tabs">
        <li class="api-class-tab index"><a href="#index">Index</a></li>

        
            <li class="api-class-tab methods"><a href="#methods">Methods</a></li>
        
        
        
        
    </ul>

    <div>
        <div id="index" class="api-class-tabpanel index">
            <h2 class="off-left">Item Index</h2>

            
                <div class="index-section methods">
                    <h3>Methods</h3>

                    <ul class="index-list methods">
                        
                            <li class="index-item method public">
                                <a href="#method_debug">debug</a>

                                
                                
                            </li>
                        
                            <li class="index-item method public">
                                <a href="#method_expose">expose</a>

                                
                                
                            </li>
                        
                            <li class="index-item method protected">
                                <a href="#method_exposeConfig">exposeConfig</a>

                                
                                
                            </li>
                        
                            <li class="index-item method protected">
                                <a href="#method_exposeSeed">exposeSeed</a>

                                
                                
                            </li>
                        
                            <li class="index-item method public inherited">
                                <a href="#method_ready">ready</a>

                                
                                
                            </li>
                        
                            <li class="index-item method public">
                                <a href="#method_static">static</a>

                                
                                
                            </li>
                        
                            <li class="index-item method public inherited">
                                <a href="#method_use">use</a>

                                
                                
                            </li>
                        
                    </ul>
                </div>
            

            

            

            
        </div>

        
            <div id="methods" class="api-class-tabpanel">
                <h2 class="off-left">Methods</h2>

                
                    <div id="method_debug" class="method item public">
    <h3 class="name"><code>debug</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>config</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    
        <span class="returns-inline">
            <span class="type">Function</span>
        </span>
    

    

    
        <span class="flag public">public</span>
    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/lib_middleware.js.html#l161"><code>lib&#x2F;middleware.js:161</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Forces a request to use yui in debug mode with combine disabled. This exposes
YUI configuration overrides per request on <code>res.locals.state</code> (which inherits
from <code>app.locals.state</code>.)</p>
<pre class="code prettyprint"><code>// exposing yui into the client side through <code>state</code> object
app.use(expyui.expose());
// using yui in debug mode when node runs in debug mode with custom filter
if (app.get(&#39;env&#39;) === &#39;development&#39;) {
    app.use(expyui.debug({filter: &#39;raw&#39;}));
}</code></pre>
<p>More details about the yui debug mode settings
<a href="http://yuilibrary.com/yui/docs/api/classes/config.html">in the YUI API Docs</a>.</p>

    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">config</code>
                        <span class="type">Object</span>
                    

                    

                    <div class="param-description">
                        <p>optional debug settings</p>

                    </div>

                    
                        <ul class="params-list">
                            
                            <li class="param">
                                
                                    <code class="param-name">combine</code>
                                    <span class="type">Boolean</span>
                                

                                <div class="param-description">
                                    <p>default to <code>false</code></p>

                                </div>

                                
                            </li>
                            
                            <li class="param">
                                
                                    <code class="param-name">logLevel</code>
                                    <span class="type">String</span>
                                

                                <div class="param-description">
                                    <p>default to <code>&quot;debug&quot;</code></p>

                                </div>

                                
                            </li>
                            
                            <li class="param">
                                
                                    <code class="param-name">filter</code>
                                    <span class="type">String</span>
                                

                                <div class="param-description">
                                    <p>default to <code>&quot;debug&quot;</code></p>

                                </div>

                                
                            </li>
                            
                            <li class="param">
                                
                                    <code class="param-name">useBrowserConsole</code>
                                    <span class="type">Boolean</span>
                                

                                <div class="param-description">
                                    <p>optional debug settings</p>

                                </div>

                                
                            </li>
                            
                        </ul>
                    
                </li>
            
            </ul>
        </div>
    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">Function</span>:
                    
                    <p>express middleware</p>

                
            </div>
        </div>
    

    
</div>

                
                    <div id="method_expose" class="method item public">
    <h3 class="name"><code>expose</code></h3>

    
        <span class="paren">()</span>
    

    
        <span class="returns-inline">
            <span class="type">Function</span>
        </span>
    

    

    
        <span class="flag public">public</span>
    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/lib_middleware.js.html#l106"><code>lib&#x2F;middleware.js:106</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Exposes YUI into the client side. This middleware bundles
<code>expyui.exposeConfig()</code> and <code>expyui.exposeSeed()</code> middleware.</p>
<pre class="code prettyprint"><code>var express = require(&#39;express&#39;),
    expyui = require(&#39;express-yui&#39;),
    app = express();

expyui.extend(app);

// using it for a mounted middleware for all requests
app.use(expyui.expose());</code></pre>
<p>In the example above, the <code>state</code> of the app will be serialized <em>once</em>, on
the first request, and can be used in the template to set up the client
side to run YUI with the same configuration used on the server side.
Here is an example of a handlebars template:</p>
<pre class="code prettyprint"><code>&lt;script&gt;
{{{state}}}
app.yui.use(&#39;node&#39;, function (Y) {
    Y.one(&#39;#content&#39;).setContent(&#39;&lt;p&gt;Ready!&lt;/p&gt;&#39;);
});
&lt;/script&gt;</code></pre>

    </div>

    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">Function</span>:
                    
                    <p>express middleware</p>

                
            </div>
        </div>
    

    
</div>

                
                    <div id="method_exposeConfig" class="method item protected">
    <h3 class="name"><code>exposeConfig</code></h3>

    
        <span class="paren">()</span>
    

    
        <span class="returns-inline">
            <span class="type">Function</span>
        </span>
    

    

    
        <span class="flag protected">protected</span>
    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/lib_middleware.js.html#l32"><code>lib&#x2F;middleware.js:32</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Exposes the yui configuration into <code>app.locals.state</code>. It also
exposes the <code>express-yui</code> wrapper for YUI on the client so you can
access <code>app.yui.*</code> on the client side just like you do on the server
side. The client wrapper includes <code>app.yui.ready()</code> and <code>app.yui.use()</code>
with the corresponding bootstraping code to inject YUI into the page.
This middleware will be invoked by <code>expyui.expose()</code> middleware
automatically, which means you do not need to call it directly.</p>

    </div>

    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">Function</span>:
                    
                    <p>express middleware</p>

                
            </div>
        </div>
    

    
</div>

                
                    <div id="method_exposeSeed" class="method item protected">
    <h3 class="name"><code>exposeSeed</code></h3>

    
        <span class="paren">()</span>
    

    
        <span class="returns-inline">
            <span class="type">Function</span>
        </span>
    

    

    
        <span class="flag protected">protected</span>
    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/lib_middleware.js.html#l69"><code>lib&#x2F;middleware.js:69</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Expose the seed information into <code>app.locals.state</code>. This seed is
an array of urls based on the call to <code>app.yui.seed()</code>, which is
going to be used by the client bootstrap code to inject YUI into
the page.
This middleware will be invoked by <code>expyui.expose()</code> middleware
automatically, which means you do not need to call it directly.</p>

    </div>

    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">Function</span>:
                    
                    <p>express middleware</p>

                
            </div>
        </div>
    

    
</div>

                
                    <div id="method_ready" class="method item public inherited">
    <h3 class="name"><code>ready</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>callback</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    

    

    
        <span class="flag public">public</span>
    

    

    

    

    

    <div class="meta">
        
            
                <p>Inherited from
                <a href="../classes/Client.html#method_ready">client</a>:
            
        
        
        <a href="../files/lib_client.js.html#l170"><code>lib&#x2F;client.js:170</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p><p>Boots the application, rehydrate the app state and calls back to notify the
<code>ready</code> state of the app.</p></p>
<pre class="code prettyprint"><code>&lt;script&gt;{{{state}}}&lt;/script&gt;
&lt;script&gt;
app.yui.ready(function (err) {
    if (err) {
        throw err;
    }
    app.yui.use(&#39;foo&#39;, &#39;bar&#39;, function (Y) {
        // do something!
    });
});
&lt;/script&gt;</code></pre>

    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">callback</code>
                        <span class="type">Function</span>
                    

                    

                    <div class="param-description">
                        <p>when the app is ready. If an error occurr, the error object
                    will be passed as the first argument of the callback function.</p>

                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    

    
</div>

                
                    <div id="method_static" class="method item public">
    <h3 class="name"><code>static</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>buildDirectory</code>
                    
                </li>
            
                <li class="arg">
                    
                        <code>options</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    
        <span class="returns-inline">
            <span class="type">Object</span>
        </span>
    

    

    
        <span class="flag public">public</span>
    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/lib_middleware.js.html#l209"><code>lib&#x2F;middleware.js:209</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Serves YUI Modules as static assets. All registered groups and core will be
served from app origin.</p>
<pre class="code prettyprint"><code>app.use(expyui.static(__dirname + &#39;/build&#39;));</code></pre>
<p>The example above behaves very similar to <code>express.static()</code> middleware, but
it adds some sugar to also server YUI core modules as synthetic files, so you
can combine yui core modules with app specific modules for better performance.
If also adds some extra headers to avoid caching static files in a browser
when nodejs is running in debug mode to facilitate development.</p>

    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">buildDirectory</code>
                        <span class="type">String</span>
                    

                    

                    <div class="param-description">
                        <p>fullpath to locator build directory</p>

                    </div>

                    
                </li>
            
                <li class="param">
                    
                        <code class="param-name">options</code>
                        <span class="type">Object</span>
                    

                    

                    <div class="param-description">
                        <p>express static handler options</p>

                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">Object</span>:
                    
                    <p>express app that can be mounted into another express app.</p>

                
            </div>
        </div>
    

    
</div>

                
                    <div id="method_use" class="method item public inherited">
    <h3 class="name"><code>use</code></h3>

    
        <span class="paren">()</span>
    

    

    

    
        <span class="flag public">public</span>
    

    

    

    

    

    <div class="meta">
        
            
                <p>Inherited from
                <a href="../classes/Client.html#method_use">client</a>:
            
        
        
        <a href="../files/lib_client.js.html#l149"><code>lib&#x2F;client.js:149</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Attaches the seed into the head, then creates a YUI Instance and attaches
<code>modules</code> into it. This is equivalent to <code>YUI().use()</code> after getting the seed
ready. This method is a bootstrap implementation for the library, and the way
you use this in your templates, is by doing this:</p>
<pre class="code prettyprint"><code>&lt;script&gt;{{{state}}}&lt;/script&gt;
&lt;script&gt;
app.yui.use(&#39;foo&#39;, &#39;bar&#39;, function (Y) {
    // do something!
});
&lt;/script&gt;</code></pre>
<p>Where <code>state</code> defines the state of the express app, and <code>app.yui</code> defines
the helpers that <code>express-yui</code> brings into the client side.</p>

    </div>

    

    

    
</div>

                
            </div>
        

        

        

        
    </div>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
